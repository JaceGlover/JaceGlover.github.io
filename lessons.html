<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AceBlocks Lua Academy</title>

<style>
body{
  margin:0;
  font-family: 'Segoe UI', sans-serif;
  background:#f4f6f9;
  display:flex;
  height:100vh;
}

/* Sidebar */
#sidebar{
  width:260px;
  background:#2b2f42;
  color:white;
  padding:20px;
  overflow-y:auto;
}

#sidebar h2{
  margin-top:0;
}

.lessonBtn{
  background:#3a3f5a;
  padding:10px;
  margin:6px 0;
  border-radius:8px;
  cursor:pointer;
  transition:0.2s;
}

.lessonBtn:hover{
  background:#5865f2;
}

/* Main Area */
#main{
  flex:1;
  display:flex;
  flex-direction:column;
}

/* Top Bar */
#topbar{
  background:white;
  padding:15px 25px;
  box-shadow:0 2px 8px rgba(0,0,0,0.1);
  display:flex;
  justify-content:space-between;
  align-items:center;
}

#progressBar{
  width:200px;
  height:10px;
  background:#ddd;
  border-radius:5px;
  overflow:hidden;
}

#progressFill{
  height:100%;
  width:0%;
  background:#4caf50;
  transition:0.4s;
}

/* Workspace Area */
#content{
  flex:1;
  display:flex;
  padding:20px;
  gap:20px;
}

/* Blocks Panel */
.panel{
  background:white;
  border-radius:12px;
  padding:15px;
  box-shadow:0 5px 15px rgba(0,0,0,0.08);
  flex:1;
  display:flex;
  flex-direction:column;
}

.panel h3{
  margin-top:0;
}

#blocks{
  flex:1;
}

.block{
  background:#ffd54f;
  padding:10px;
  margin:6px 0;
  border-radius:8px;
  cursor:grab;
  font-weight:bold;
}

.block:active{
  cursor:grabbing;
}

#workspace{
  flex:1;
  background:#f9fafc;
  border:2px dashed #ccc;
  border-radius:10px;
  padding:10px;
  overflow:auto;
}

#trash{
  margin-top:10px;
  padding:8px;
  background:#ff5252;
  color:white;
  border-radius:8px;
  text-align:center;
}

button{
  margin-top:10px;
  padding:10px;
  border:none;
  border-radius:8px;
  background:#4caf50;
  color:white;
  cursor:pointer;
}

#output{
  margin-top:10px;
  background:#111;
  color:#0f0;
  padding:10px;
  border-radius:8px;
  min-height:40px;
}
</style>
</head>
<body>

<div id="sidebar">
  <h2>AceBlocks</h2>
  <div id="lessonList"></div>
</div>

<div id="main">

  <div id="topbar">
    <div>
      <strong id="lessonTitle"></strong><br>
      <span id="objective"></span>
    </div>
    <div>
      <div id="progressBar">
        <div id="progressFill"></div>
      </div>
    </div>
  </div>

  <div id="content">

    <div class="panel">
      <h3>Blocks</h3>
      <div id="blocks"></div>
    </div>

    <div class="panel">
      <h3>Workspace</h3>
      <div id="workspace"></div>
      <div id="trash">ðŸ—‘ Drag Here To Delete</div>
      <button onclick="runCode()">Run Code</button>
      <div id="output"></div>
    </div>

  </div>

</div>

<script>
let currentLesson = 0;

const lessons = [
{title:"Print Hello",objective:"Print 'Hello World'",blocks:["print('Hello World')"],answer:"print('Hello World')"},
{title:"Variables",objective:"Set x=5 and print x",blocks:["x = 5","print(x)"],answer:"x = 5 print(x)"},
{title:"If Statement",objective:"If x==5 print 'Correct'",blocks:["x = 5","if x == 5 then","print('Correct')","end"],answer:"x = 5 if x == 5 then print('Correct') end"},
{title:"Loop",objective:"Loop 1 to 3 print i",blocks:["for i = 1,3 do","print(i)","end"],answer:"for i = 1,3 do print(i) end"},
{title:"Function",objective:"Create greet() printing 'Hi'",blocks:["function greet()","print('Hi')","end","greet()"],answer:"function greet() print('Hi') end greet()"}
];

function buildSidebar(){
  let list=document.getElementById("lessonList");
  list.innerHTML="";
  lessons.forEach((l,i)=>{
    let div=document.createElement("div");
    div.className="lessonBtn";
    div.innerText="Lesson "+(i+1);
    div.onclick=()=>{currentLesson=i;loadLesson();};
    list.appendChild(div);
  });
}

function loadLesson(){
  let lesson=lessons[currentLesson];
  document.getElementById("lessonTitle").innerText=lesson.title;
  document.getElementById("objective").innerText=lesson.objective;
  document.getElementById("workspace").innerHTML="";
  document.getElementById("output").innerHTML="";
  let blockArea=document.getElementById("blocks");
  blockArea.innerHTML="";
  lesson.blocks.forEach(text=>{
    let div=document.createElement("div");
    div.className="block";
    div.innerText=text;
    div.draggable=true;
    div.ondragstart=e=>e.dataTransfer.setData("text",text);
    blockArea.appendChild(div);
  });
  updateProgress();
}

document.getElementById("workspace").ondragover=e=>e.preventDefault();
document.getElementById("workspace").ondrop=e=>{
  e.preventDefault();
  let text=e.dataTransfer.getData("text");
  let div=document.createElement("div");
  div.className="block";
  div.innerText=text;
  div.draggable=true;
  div.ondragstart=ev=>ev.dataTransfer.setData("text",text);
  document.getElementById("workspace").appendChild(div);
};

document.getElementById("trash").ondragover=e=>e.preventDefault();
document.getElementById("trash").ondrop=e=>{
  e.preventDefault();
  document.getElementById("workspace").innerHTML="";
};

function runCode(){
  let blocks=document.querySelectorAll("#workspace .block");
  let code="";
  blocks.forEach(b=>code+=b.innerText+" ");
  code=code.trim();
  if(code===lessons[currentLesson].answer){
    document.getElementById("output").innerText="âœ… Correct!";
    currentLesson++;
    if(currentLesson<lessons.length){
      setTimeout(loadLesson,1200);
    } else {
      document.getElementById("output").innerText="ðŸŽ‰ Course Complete!";
    }
  } else {
    document.getElementById("output").innerText="âŒ Try again!";
  }
}

function updateProgress(){
  let percent=((currentLesson)/lessons.length)*100;
  document.getElementById("progressFill").style.width=percent+"%";
}

buildSidebar();
loadLesson();
</script>

</body>
</html>
